(()=>{var e={772:(e,t,n)=>{"use strict";var a=n(148);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,i){if(i!==a){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},862:(e,t,n)=>{e.exports=n(772)()},148:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{addCurrentlyRunning:()=>x,addMessage:()=>I,deleteAllProducts:()=>z,enableTrackingDebug:()=>$,removeCurrentlyRunning:()=>k,removeMessage:()=>L,resetJetpackConnection:()=>W,resetOnboardingWizard:()=>B,runDisableEmail:()=>K,runSelectedCronJob:()=>X,runSelectedUpdateCallbacks:()=>H,runWcAdminDailyJob:()=>q,setCronJobs:()=>U,setDBUpdateVersions:()=>J,setIsEmailDisabled:()=>j,triggerWcaInstall:()=>G,updateCommandParams:()=>M,updateMessage:()=>P,updateStoreAge:()=>Y});var t={};n.r(t),n.d(t,{getCronJobs:()=>Q,getDBUpdateVersions:()=>Z,getIsEmailDisabled:()=>ee});var a={};n.r(a),n.d(a,{getCommandParams:()=>re,getCronJobs:()=>oe,getCurrentlyRunning:()=>te,getDBUpdateVersions:()=>le,getIsEmailDisabled:()=>ie,getMessages:()=>ne,getStatus:()=>ae});var r={};n.r(r),n.d(r,{deleteOption:()=>Ne,saveOption:()=>Oe,setLoadingState:()=>Se,setNotice:()=>ve,setOptionForEditing:()=>_e,setOptions:()=>we});var o={};n.r(o),n.d(o,{getOptionForEditing:()=>De,getOptions:()=>Te});var i={};n.r(i),n.d(i,{getNotice:()=>Ae,getOptionForEditing:()=>Ce,getOptions:()=>Fe,isLoading:()=>Re});var l={};n.r(l),n.d(l,{addExperiment:()=>qe,deleteExperiment:()=>ze,setExperiments:()=>Ye,toggleExperiment:()=>$e});var s={};n.r(s),n.d(s,{getExperiments:()=>Xe});var c={};n.r(c),n.d(c,{getExperiments:()=>He});var m={};n.r(m),n.d(m,{resetModifiedFeatures:()=>rt,setFeatures:()=>it,setModifiedFeatures:()=>lt,toggleFeature:()=>ot});var d={};n.r(d),n.d(d,{getFeatures:()=>ct,getModifiedFeatures:()=>st});var u={};n.r(u),n.d(u,{getFeatures:()=>mt,getModifiedFeatures:()=>dt});var p={};n.r(p),n.d(p,{deleteFilter:()=>vt,saveFilter:()=>Nt,setFilters:()=>wt,setLoadingState:()=>St,toggleFilter:()=>_t});var E={};n.r(E),n.d(E,{getFilters:()=>Ot});var g={};n.r(g),n.d(g,{getFilters:()=>Tt,isLoading:()=>Dt});const h=window.wp.element,y=window.wp.components,f=window.wp.hooks,b=window.wp.apiFetch;var w=n.n(b);const S=()=>{const[e,t]=(0,h.useState)(!1),[n,a]=(0,h.useState)(!1),[r,o]=(0,h.useState)(!1);return(0,h.createElement)(h.Fragment,null,(0,h.createElement)("p",null,(0,h.createElement)("strong",null,"Delete all admin notes")),(0,h.createElement)("p",null,"This will delete all notes from the"," ",(0,h.createElement)("code",null,"wp_wc_admin_notes"),"table, and actions from the"," ",(0,h.createElement)("code",null,"wp_wc_admin_note_actions"),"table.",(0,h.createElement)("br",null),(0,h.createElement)(y.Button,{onClick:async function(){t(!0),o(!1),a(!1);try{const e=await w()({path:"/wc-admin-test-helper/admin-notes/delete-all-notes/v1",method:"POST"});a(e)}catch(e){o(e.message)}t(!1)},disabled:e,isPrimary:!0},"Delete all notes"),(0,h.createElement)("br",null),(0,h.createElement)("span",{className:"woocommerce-admin-test-helper__action-status"},e&&"Deleting, please wait.",n&&(0,h.createElement)(h.Fragment,null,"Deleted"," ",(0,h.createElement)("strong",null,n.deleted_note_count)," ","admin notes and"," ",(0,h.createElement)("strong",null,n.deleted_action_count)," ","actions."),r&&(0,h.createElement)(h.Fragment,null,(0,h.createElement)("strong",null,"Error: "),r))))},_=()=>{const[e,t]=(0,h.useState)(!1),[n,a]=(0,h.useState)(!1),[r,o]=(0,h.useState)(!1),[i,l]=(0,h.useState)("info"),[s,c]=(0,h.useState)("plain");return(0,h.createElement)(h.Fragment,null,(0,h.createElement)("p",null,(0,h.createElement)("strong",null,"Add a note")),(0,h.createElement)("div",null,"email"===i?(0,h.createElement)(h.Fragment,null,"This will add a new ",(0,h.createElement)("strong",null,"email")," note. Enable email insights"," ",(0,h.createElement)("a",{href:"/wp-admin/admin.php?page=wc-settings&tab=email"},"here")," ","and run the cron to send the note by email."):(0,h.createElement)(h.Fragment,null,"This will add a new note. Currently only the note name and title will be used to create the note."),(0,h.createElement)("br",null),(0,h.createElement)("div",{className:"woocommerce-admin-test-helper__add-notes"},(0,h.createElement)(y.Button,{onClick:async function(){t(!0),a(!1),o(!1);const e=prompt("Enter the note name");if(!e)return void t(!1);const n=prompt("Enter the note title");if(n){try{await w()({path:"/wc-admin-test-helper/admin-notes/add-note/v1",method:"POST",data:{name:e,type:i,layout:s,title:n}}),a(!0)}catch(e){o(e.message)}t(!1)}else t(!1)},disabled:e,isPrimary:!0},"Add admin note"),(0,h.createElement)(y.SelectControl,{label:"Type",onChange:function(e){l(e),"info"!==e&&c("plain")},labelPosition:"side",options:[{label:"Info",value:"info"},{label:"Update",value:"update"},{label:"Email",value:"email"}],value:i}),(0,h.createElement)(y.SelectControl,{label:"Layout",onChange:function(e){c(e)},labelPosition:"side",options:[{label:"Plain",value:"plain"},{label:"Banner",value:"banner"},{label:"Thumbnail",value:"thumbnail"}],disabled:"info"!==i,value:s})),(0,h.createElement)("br",null),(0,h.createElement)("span",{className:"woocommerce-admin-test-helper__action-status"},e&&"Adding, please wait",n&&"Note added",r&&(0,h.createElement)(h.Fragment,null,(0,h.createElement)("strong",null,"Error:")," ",r))))},v=window.wp.data,N=window.wp.compose,O="wc-admin-helper/tools",T="/wc-admin-test-helper",D="runSelectedCronJob",F="runSelectedUpdateCallbacks",R=[{command:"Trigger WCA Install",description:"This will trigger a WooCommerce Admin install, which usually\n    happens when a new version (or new install) of WooCommerce\n    Admin is installed. Triggering the install manually can\n    run tasks such as removing obsolete admin notes.",action:"triggerWcaInstall"},{command:"Reset Onboarding Wizard",description:"Resets Onboarding Wizard progress.",action:"resetOnboardingWizard"},{command:"Reset Jetpack Connection",description:"Resets Jepack Connection options.",action:"resetJetpackConnection"},{command:"Enable wc-admin Tracking",description:"Enable Tracking Debug mode. You should change your console level to verbose.",action:"enableTrackingDebug"},{command:"Update WC installation timestamp",description:"Updates woocommerce_admin_install_timestamp to a certain date",action:"updateStoreAge"},{command:"Run wc_admin_daily job",description:"Run wc_admin_daily job",action:"runWcAdminDailyJob"},{command:"Delete all products",description:"Delete all products",action:"deleteAllProducts"},{command:"Run a cron job",description:(0,h.createElement)((()=>{const{cronList:e}=(0,v.useSelect)((e=>{const{getCronJobs:t}=e(O);return{cronList:t()}})),{updateCommandParams:t}=(0,v.useDispatch)(O);return(0,h.createElement)("div",{className:"trigger-cron-job"},e?(0,h.createElement)(y.SelectControl,{label:"Select cron job to run",onChange:function(n){const{hook:a,signature:r}=e[n];t(D,{hook:a,signature:r})},labelPosition:"side",options:Object.keys(e).map((e=>({label:e,value:e})))}):(0,h.createElement)("p",null,"Loading ..."))}),null),action:D},{command:"Disable WC emails",description:(0,h.createElement)((()=>{const{isEmailDisabled:e}=(0,v.useSelect)((e=>{const{getIsEmailDisabled:t}=e(O);return{isEmailDisabled:t()}}));return(0,h.createElement)("div",{className:"disable-wc-email"},(()=>{switch(e){case"yes":return"WooCommerce emails are turned off 🔴";case"no":return"WooCommerce emails are turned on 🟢";case"error":return"Error 🙁";default:return"Loading ..."}})())}),null),action:"runDisableEmail"},{command:"Run version update callbacks",description:(0,h.createElement)((()=>{const{dbUpdateVersions:e}=(0,v.useSelect)((e=>{const{getDBUpdateVersions:t}=e(O);return{dbUpdateVersions:t()}})),{updateCommandParams:t}=(0,v.useDispatch)(O);return(0,h.createElement)("div",{className:"trigger-cron-job"},e?(0,h.createElement)(y.SelectControl,{label:"Select a version to run",onChange:function(e){t(F,{version:e})},labelPosition:"side",options:e.map((e=>({label:e,value:e}))).reverse()}):(0,h.createElement)("p",null,"Loading ..."))}),null),action:F}],C=window.wp.dataControls,A={ADD_CURRENTLY_RUNNING:"ADD_CURRENTLY_RUNNING",REMOVE_CURRENTLY_RUNNING:"REMOVE_CURRENTLY_RUNNING",ADD_MESSAGE:"ADD_MESSAGE",UPDATE_MESSAGE:"UPDATE_MESSAGE",REMOVE_MESSAGE:"REMOVE_MESSAGE",ADD_COMMAND_PARAMS:"ADD_COMMAND_PARAMS",SET_CRON_JOBS:"SET_CRON_JOBS",IS_EMAIL_DISABLED:"IS_EMAIL_DISABLED",SET_DB_UPDATE_VERSIONS:"SET_DB_UPDATE_VERSIONS"};function x(e){return{type:A.ADD_CURRENTLY_RUNNING,command:e}}function k(e){return{type:A.REMOVE_CURRENTLY_RUNNING,command:e}}function I(e,t){return{type:A.ADD_MESSAGE,source:e,message:t}}function P(e,t,n){return{type:A.ADD_MESSAGE,source:e,message:t,status:n}}function L(e){return{type:A.REMOVE_MESSAGE,source:e}}function M(e,t){return{type:A.ADD_COMMAND_PARAMS,source:e,params:t}}function U(e){return{type:A.SET_CRON_JOBS,cronJobs:e}}function J(e){return{type:A.SET_DB_UPDATE_VERSIONS,versions:e}}function j(e){return{type:A.IS_EMAIL_DISABLED,isEmailDisabled:e}}function*V(e,t){try{yield x(e),yield I(e,"Executing..."),yield t(),yield k(e),yield P(e,"Successful!")}catch(t){yield P(e,t.message,"error"),yield k(e)}}function*G(){yield V("Trigger WCA Install",(function*(){yield(0,C.apiFetch)({path:T+"/tools/trigger-wca-install/v1",method:"POST"})}))}function*B(){yield V("Reset Onboarding Wizard",(function*(){yield(0,C.apiFetch)({method:"DELETE",path:`${T}/options/${["woocommerce_task_list_tracked_completed_tasks","woocommerce_onboarding_profile","_transient_wc_onboarding_themes"].join(",")}`})}))}function*W(){yield V("Reset Jetpack Connection",(function*(){yield(0,C.apiFetch)({method:"DELETE",path:`${T}/options/jetpack_options`})}))}function*$(){yield V("Enable WC Admin Tracking Debug Mode",(function*(){window.localStorage.setItem("debug","wc-admin:*")}))}function*Y(){yield V("Update Installation timestamp",(function*(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear(),r=window.prompt("Please enter a date in yyyy/mm/dd format",a+"/"+n+"/"+t);if(null!==r){const e=r.split("/"),t=Math.round(new Date(e[0],e[1]-1,e[2]).getTime()/1e3),n={woocommerce_admin_install_timestamp:JSON.parse(t)};yield(0,C.apiFetch)({method:"POST",path:"/wc-admin/options",headers:{"content-type":"application/json"},body:JSON.stringify(n)})}}))}function*q(){yield V("Run wc_admin_daily job",(function*(){yield(0,C.apiFetch)({path:T+"/tools/run-wc-admin-daily/v1",method:"POST"})}))}function*z(){confirm("Are you sure you want to delete all of the products?")&&(yield V("Delete all products",(function*(){yield(0,C.apiFetch)({path:`${T}/tools/delete-all-products/v1`,method:"POST"})})))}function*X(e){yield V("Run selected cron job",(function*(){yield(0,C.apiFetch)({path:T+"/tools/run-wc-admin-daily/v1",method:"POST",data:e})}))}function*H(e){yield V("Run version update callbacks",(function*(){yield(0,C.apiFetch)({path:T+"/tools/trigger-selected-update-callbacks/v1",method:"POST",data:e})}))}function*K(){yield V("Disable/Enable WooCommerce emails",(function*(){const e=yield(0,C.apiFetch)({path:`${T}/tools/toggle-emails/v1`,method:"POST"});yield j(e)}))}function*Q(){const e=`${T}/tools/get-cron-list/v1`;try{const t=yield(0,C.apiFetch)({path:e,method:"GET"});yield U(t)}catch(e){throw new Error(e)}}function*Z(){const e=`${T}/tools/get-update-versions/v1`;try{const t=yield(0,C.apiFetch)({path:e,method:"GET"});yield J(t)}catch(e){throw new Error(e)}}function*ee(){const e=`${T}/tools/get-email-status/v1`;try{const t=yield(0,C.apiFetch)({path:e,method:"GET"});yield j(t)}catch(e){throw yield j("error"),new Error(e)}}function te(e){return e.currentlyRunning}function ne(e){return e.messages}function ae(e){return e.status}function re(e){return e.params}function oe(e){return e.cronJobs}function ie(e){return e.isEmailDisabled}function le(e){return e.dbUpdateVersions}const se={currentlyRunning:{},errorMessages:[],cronJobs:!1,isEmailDisabled:"",messages:{},params:[],status:"",dbUpdateVersions:[]};(0,v.registerStore)(O,{actions:e,selectors:a,resolvers:t,controls:C.controls,reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.ADD_MESSAGE:return t.status||(t.status="info"),{...e,messages:{...e.messages,[t.source]:{message:t.message,status:t.status}}};case A.REMOVE_MESSAGE:const n={...e.messages};return delete n[t.source],{...e,messages:n};case A.SET_STATUS:return{...e,status:t.status};case A.ADD_CURRENTLY_RUNNING:return{...e,currentlyRunning:{...e,[t.command]:!0}};case A.REMOVE_CURRENTLY_RUNNING:return{...e,currentlyRunning:{...e,[t.command]:!1}};case A.SET_CRON_JOBS:return{...e,cronJobs:t.cronJobs};case A.IS_EMAIL_DISABLED:return{...e,isEmailDisabled:t.isEmailDisabled};case A.ADD_COMMAND_PARAMS:return{...e,params:{[t.source]:t.params}};case A.SET_DB_UPDATE_VERSIONS:return{...e,dbUpdateVersions:t.versions};default:return e}}});const ce=(0,N.compose)((0,v.withSelect)((e=>{const{getCurrentlyRunning:t,getMessages:n,getCommandParams:a}=e(O);return{currentlyRunningCommands:t(),messages:n(),comandParams:a()}})),(0,v.withDispatch)((e=>({actions:function(){return e(O)}}))))((function(e){let{actions:t,currentlyRunningCommands:n,messages:a,comandParams:r}=e;return t=t(),(0,h.createElement)("div",{id:"wc-admin-test-helper-tools"},(0,h.createElement)("h2",null,"Tools"),(0,h.createElement)("p",null,"This section contains miscellaneous tools."),Object.keys(a).map((e=>(0,h.createElement)(y.Notice,{status:a[e].status,key:e,isDismissible:!1},e,": ",a[e].message))),(0,h.createElement)("table",{className:"tools wp-list-table striped table-view-list widefat"},(0,h.createElement)("thead",null,(0,h.createElement)("tr",null,(0,h.createElement)("th",null,"Command"),(0,h.createElement)("th",null,"Description"),(0,h.createElement)("th",null,"Run"))),(0,h.createElement)("tbody",null,R.map(((e,a)=>{var o;let{action:i,command:l,description:s}=e;const c=null!==(o=r[i])&&void 0!==o&&o;return(0,h.createElement)("tr",{key:a},(0,h.createElement)("td",{className:"command"},l),(0,h.createElement)("td",null,s),(0,h.createElement)("td",null,(0,h.createElement)(y.Button,{onClick:()=>t[i](c),disabled:n[l],isPrimary:!0},"Run")))})))))})),me="wc-admin-helper/options";var de=n(862),ue=n.n(de);const pe=e=>{const[t,n]=(0,h.useState)(e.option.content);return(0,h.useEffect)((()=>{n(e.option.content)}),[e.option]),(0,h.createElement)(h.Fragment,null,(0,h.createElement)("textarea",{className:"wca-test-helper-option-editor",value:t,onChange:e=>{n(e.target.value)}}),(0,h.createElement)(y.Button,{className:"wca-test-helper-edit-btn-save",isPrimary:!0,onClick:()=>{e.onSave(e.option.name,t)},disabled:!0===e.option.isSaving},e.option.isSaving?"Saving...":"Save"),(0,h.createElement)("div",{className:"clear"}))};pe.propTypes={option:ue().object.isRequired,onSave:ue().func.isRequired};const Ee=pe,ge="SET_OPTIONS",he="SET_OPTION_FOR_EDITING",ye="SET_IS_LOADING",fe="SET_NOTICE",be="DELETE_OPTION";function we(e){return{type:ge,options:e}}function Se(e){return{type:ye,isLoading:e}}function _e(e){return{type:he,editingOption:e}}function ve(e){return{type:fe,notice:e}}function*Ne(e){try{yield(0,C.apiFetch)({method:"DELETE",path:`/wc-admin-test-helper/options/${e}`}),yield{type:be,optionName:e}}catch{throw new Error}}function*Oe(e,t){try{const n={};n[e]=JSON.parse(t),yield(0,C.apiFetch)({method:"POST",path:"/wc-admin/options",headers:{"content-type":"application/json"},body:JSON.stringify(n)}),yield ve({status:"success",message:e+" has been saved."})}catch{throw yield ve({status:"error",message:"Unable to save "+e}),new Error}}function*Te(e){let t="/wc-admin-test-helper/options?";e&&(t+=`search=${e}`),yield Se(!0);try{const e=yield(0,C.apiFetch)({path:t});yield we(e)}catch(e){throw new Error}}function*De(e){const t={name:"Loading...",content:"",saved:!1};if(void 0===e)return _e(t);yield _e(t);const n="/wc-admin/options?options="+e;try{const t=yield(0,C.apiFetch)({path:n});let a=t[e];"object"==typeof a&&(a=JSON.stringify(t[e],null,2)),yield _e({name:e,content:a})}catch(e){throw new Error(e)}}function Fe(e){return e.options}function Re(e){return e.isLoading}function Ce(e){return e.editingOption}function Ae(e){return e.notice}const xe={options:[],isLoading:!0,editingOption:{name:null,content:"{}"},notice:{status:"success",message:""}};(0,v.registerStore)(me,{actions:r,selectors:i,resolvers:o,controls:C.controls,reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he:return{...e,editingOption:{...e.editingOption,...t.editingOption}};case ye:return{...e,isLoading:t.isLoading};case ge:return{...e,options:t.options,isLoading:!1};case fe:return{...e,notice:{...e.notice,...t.notice}};case be:return{...e,options:e.options.filter((e=>e.option_name!==t.optionName))};default:return e}}});const ke=(0,N.compose)((0,v.withSelect)((e=>{const{getOptions:t,getOptionForEditing:n,getNotice:a,isLoading:r}=e(me),o=t(),i=n(),l=a();return{options:o,getOptions:t,isLoading:r(),editingOption:i,getOptionForEditing:n,notice:l}})),(0,v.withDispatch)((e=>{const{deleteOption:t,saveOption:n,setNotice:a}=e(me),{invalidateResolution:r}=e("core/data");return{deleteOption:t,invalidateResolution:r,saveOption:n,setNotice:a}})))((function(e){let{options:t,getOptions:n,deleteOption:a,isLoading:r,invalidateResolution:o,getOptionForEditing:i,editingOption:l,saveOption:s,notice:c,setNotice:m}=e;const[d,u]=(0,h.useState)(!1);return(0,h.createElement)(h.Fragment,null,d&&(0,h.createElement)(y.Modal,{title:l.name,onRequestClose:()=>{u(!1)}},(0,h.createElement)(Ee,{option:l,onSave:(e,t)=>{s(e,t),u(!1)}})),(0,h.createElement)("div",{id:"wc-admin-test-helper-options"},c.message.length>0&&(0,h.createElement)(y.Notice,{status:c.status,onRemove:()=>{m({message:""})}},c.message),(0,h.createElement)("form",{onSubmit:e=>{e.preventDefault();const t=e.target.search.value;o(me,"getOptions",[t]),n(t)}},(0,h.createElement)("div",{className:"search-box"},(0,h.createElement)("label",{className:"screen-reader-text",htmlFor:"post-search-input"},"Search options:"),(0,h.createElement)("input",{type:"search",name:"search"}),(0,h.createElement)("input",{type:"submit",id:"search-submit",className:"button",value:"Search options"}))),(0,h.createElement)("div",{className:"clear"}),(0,h.createElement)("table",{className:"wp-list-table striped table-view-list widefat"},(0,h.createElement)("thead",null,(0,h.createElement)("tr",null,(0,h.createElement)("td",{className:"manage-column column-thumb",key:0},"I.D"),(0,h.createElement)("td",{className:"manage-column column-thumb",key:1},"Name"),(0,h.createElement)("td",{className:"manage-column column-thumb",key:"optionValue"},"Value"),(0,h.createElement)("td",{className:"manage-column column-thumb align-center",key:2},"Autoload"),(0,h.createElement)("td",{className:"manage-column column-thumb align-center",key:3},"Delete"),(0,h.createElement)("td",{className:"manage-column column-thumb align-center",key:4},"Edit"))),(0,h.createElement)("tbody",null,r?(0,h.createElement)("tr",null,(0,h.createElement)("td",{colSpan:"6",align:"center"},"Loading...")):0===t.length?(0,h.createElement)("tr",null,(0,h.createElement)("td",{colSpan:"6",align:"center"},"No Options Found")):t.map((e=>{const{option_id:t,option_name:n,option_value:r,autoload:l}=e,s=t,c=n,m=(d=r).length>20?d.substring(0,20)+"...":d;var d;return(0,h.createElement)("tr",{key:s},(0,h.createElement)("td",{key:0},s),(0,h.createElement)("td",{key:1},c),(0,h.createElement)("td",{key:"optionValue"},m),(0,h.createElement)("td",{className:"align-center",key:2},l),(0,h.createElement)("td",{className:"align-center",key:3},(0,h.createElement)("button",{className:"button btn-danger",onClick:()=>(e=>{confirm("Are you sure you want to delete this option?")&&a(e)})(c)},"Delete")),(0,h.createElement)("td",{className:"align-center",key:4},(0,h.createElement)("button",{className:"button btn-primary",onClick:()=>(e=>{o(me,"getOptionForEditing",[e]),i(e),u(!0)})(c)},"Edit")))}))))))})),Ie=window.wc.data,Pe="wc-admin-helper/experiments",Le="explat-experiment--",Me="_transient_abtest_variation_",Ue="_transient_timeout_abtest_variation",Je="TOGGLE_EXPERIMENT",je="SET_EXPERIMENTS",Ve="ADD_EXPERIMENT",Ge="DELETE_EXPERIMENT";function Be(e,t){let n=JSON.parse(window.localStorage.getItem(Le+e));null===n&&(n={experimentName:e,retrievedTimestamp:Date.now()}),n.variationName=t,n.ttl=3600,window.localStorage.setItem(Le+e,JSON.stringify(n))}function*We(e,t){try{const n={};n[Me+e]=t,n[Ue+e]=Math.round(Date.now()/1e3)+3600,yield(0,C.apiFetch)({method:"POST",path:"/wc-admin/options",headers:{"content-type":"application/json"},body:JSON.stringify(n)})}catch(e){throw new Error}}function*$e(e,t){const n="control"===t?"treatment":"control";return Be(e,n),yield We(e,n),{type:Je,experimentName:e,newVariation:n}}function Ye(e){return{type:je,experiments:e}}function*qe(e,t){return Be(e,t),yield We(e,t),{type:Ve,experimentName:e,variation:t}}function*ze(e){window.localStorage.removeItem(Le+e);const t=[Me+e,Ue+e];return yield(0,C.apiFetch)({method:"DELETE",path:"/wc-admin-test-helper/options/"+t.join(",")}),{type:Ge,experimentName:e}}function*Xe(){try{const e=(yield(0,C.apiFetch)({path:"/wc-admin-test-helper/options?search=_transient_abtest_variation_"})).map((e=>({name:e.option_name.replace(Me,""),variation:"control"===e.option_value?"control":"treatment"}))),t=Object.entries({...window.localStorage}).filter((e=>0===e[0].indexOf(Le))).map((e=>{const[t,n]=e,a=JSON.parse(n);return{name:t.replace(Le,""),variation:a.variationName||"control"}})).concat(e).filter(((e,t,n)=>t===n.findIndex((t=>t.place===e.place&&t.name===e.name))));yield Ye(t)}catch(e){throw new Error}}function He(e){return e.experiments}const Ke={experiments:[]};(0,v.registerStore)(Pe,{actions:l,selectors:c,resolvers:s,controls:C.controls,reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:return{...e,experiments:e.experiments.filter((e=>e.name!==t.experimentName))};case Ve:const n=e.experiments.findIndex((e=>e.name===t.experimentName)),a={name:t.experimentName,variation:t.variation},r=-1!==n?e.experiments.slice(0,n).concat(a).concat(e.experiments.slice(n+1)):[...e.experiments,{name:t.experimentName,variation:t.variation}];return{...e,experiments:r};case Je:return{...e,experiments:e.experiments.map((e=>({...e,variation:e.name===t.experimentName?t.newVariation:e.variation})))};case je:return{...e,experiments:t.experiments};default:return e}}});const Qe=(0,N.compose)((0,v.withDispatch)((e=>{const{addExperiment:t}=e(Pe);return{addExperiment:t}})))((function(e){let{addExperiment:t}=e;const[n,a]=(0,h.useState)(null),[r,o]=(0,h.useState)("treatment");return(0,h.createElement)("div",{className:"manual-input"},(0,h.createElement)("div",{className:"description"},"Don't see an experiment you want to test? Add it manually."),(0,h.createElement)("input",{type:"text",onChange:e=>{a(e.target.value)}}),(0,h.createElement)("select",{value:r,onChange:e=>{o(e.target.value)}},(0,h.createElement)("option",{value:"treatment"},"treatment"),(0,h.createElement)("option",{value:"control"},"control")),(0,h.createElement)(y.Button,{isPrimary:!0,onClick:()=>{t(n,r)}},"Add"))})),Ze=(0,N.compose)((0,v.withSelect)((e=>{const{getExperiments:t}=e(Pe),{getOption:n,isResolving:a}=e(Ie.OPTIONS_STORE_NAME);return{experiments:t(),isTrackingEnabled:n("woocommerce_allow_tracking"),isResolving:a("getOption",["getExperiments"])}})),(0,v.withDispatch)((e=>{const{toggleExperiment:t,deleteExperiment:n}=e(Pe);return{toggleExperiment:t,deleteExperiment:n}})))((function(e){let{experiments:t,toggleExperiment:n,deleteExperiment:a,isTrackingEnabled:r,isResolving:o}=e;return o?null:(0,h.createElement)("div",{id:"wc-admin-test-helper-experiments"},(0,h.createElement)("h2",null,"Experiments"),"no"===r&&(0,h.createElement)("p",{className:"tracking-disabled"},"The following list might not be complete without tracking enabled. ",(0,h.createElement)("br",null),"Please visit ",(0,h.createElement)("a",{target:"_blank",href:wcSettings.adminUrl+"/admin.php?page=wc-settings&tab=advanced&section=woocommerce_com",rel:"noreferrer"},"WooCommerce → Settings → Advanced → Woocommerce.com")," and check"," ",(0,h.createElement)("b",null,"Allow usage of WooCommerce to be tracked"),"."),(0,h.createElement)(Qe,null),(0,h.createElement)("table",{className:"experiments wp-list-table striped table-view-list widefat"},(0,h.createElement)("thead",null,(0,h.createElement)("tr",null,(0,h.createElement)("th",null,"Experiment"),(0,h.createElement)("th",null,"Variation"),(0,h.createElement)("th",null,"Actions"))),(0,h.createElement)("tbody",null,t.map(((e,t)=>{let{name:r,variation:o}=e;return(0,h.createElement)("tr",{key:t},(0,h.createElement)("td",{className:"experiment-name"},r),(0,h.createElement)("td",{align:"center"},o),(0,h.createElement)("td",{className:"actions",align:"center"},(0,h.createElement)(y.Button,{onClick:()=>{n(r,o)},isPrimary:!0},"Toggle"),(0,h.createElement)(y.Button,{onClick:()=>{a(r)},className:"btn btn-danger"},"Delete")))})))))})),et="wc-admin-helper/features",tt="wc_admin_helper_feature_values",nt="SET_FEATURES",at="SET_MODIFIED_FEATURES";function*rt(){try{const e=yield(0,C.apiFetch)({path:"/wc-admin-test-helper/features/reset",method:"POST"});yield lt([]),yield it(e)}catch(e){throw new Error}}function*ot(e){try{const t=yield(0,C.apiFetch)({method:"POST",path:"/wc-admin-test-helper/features/"+e+"/toggle",headers:{"content-type":"application/json"}});yield it(t),yield v.controls.dispatch(et,"invalidateResolutionForStoreSelector","getModifiedFeatures")}catch(e){throw new Error}}function it(e){return{type:nt,features:e}}function lt(e){return{type:at,modifiedFeatures:e}}function*st(){try{const e=yield(0,C.apiFetch)({path:"wc-admin/options?options="+tt});yield lt(e&&e[tt]?Object.keys(e[tt]):[])}catch(e){throw new Error}}function*ct(){try{const e=yield(0,C.apiFetch)({path:"/wc-admin-test-helper/features"});yield it(e)}catch(e){throw new Error}}function mt(e){return e.features}function dt(e){return e.modifiedFeatures}const ut={features:{},modifiedFeatures:[]};(0,v.registerStore)(et,{actions:m,selectors:u,resolvers:d,controls:C.controls,reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case at:return{...e,modifiedFeatures:t.modifiedFeatures};case nt:return{...e,features:t.features};default:return e}}});const pt="wc-admin-helper/rest-api-filters",Et="wc-admin-test-helper-rest-api-filters",gt="SET_FILTERS",ht="SET_IS_LOADING",yt="DELETE_FILTER",ft="SAVE_FILTER",bt="TOGGLE_FILTER";function wt(e){return{type:gt,filters:e}}function St(e){return{type:ht,isLoading:e}}function*_t(e){try{yield(0,C.apiFetch)({method:"POST",path:`/wc-admin-test-helper/rest-api-filters/${e}/toggle`,headers:{"content-type":"application/json"}}),yield{type:bt,index:e}}catch{throw new Error}}function*vt(e){try{yield(0,C.apiFetch)({method:"DELETE",path:"/wc-admin-test-helper/rest-api-filters/",headers:{"content-type":"application/json"},body:JSON.stringify({index:e})}),yield{type:yt,index:e}}catch{throw new Error}}function*Nt(e,t,n){try{yield(0,C.apiFetch)({method:"POST",path:"/wc-admin-test-helper/rest-api-filters",headers:{"content-type":"application/json"},body:JSON.stringify({endpoint:e,dot_notation:t,replacement:n})}),yield{type:ft,filter:{endpoint:e,dot_notation:t,replacement:n,enabled:!0}}}catch{throw new Error}}function*Ot(){yield St(!0);try{const e=yield(0,C.apiFetch)({path:"/wc-admin/options?options=wc-admin-test-helper-rest-api-filters"});!1===e[Et]?yield wt([]):yield wt(e[Et])}catch(e){throw new Error}}function Tt(e){return e.filters}function Dt(e){return e.isLoading}const Ft={filters:[],isLoading:!0,notice:{status:"success",message:""}};(0,v.registerStore)(pt,{actions:p,selectors:g,resolvers:E,controls:C.controls,reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bt:return{...e,filters:e.filters.map(((e,n)=>(n===t.index&&(e.enabled=!e.enabled),e)))};case ht:return{...e,isLoading:t.isLoading};case gt:return{...e,filters:t.filters,isLoading:!1};case yt:return{...e,filters:e.filters.filter(((e,n)=>n!==t.index))};case ft:return{...e,filters:[...e.filters,t.filter]};default:return e}}});const Rt=(0,N.compose)((0,v.withSelect)((e=>{const{getFilters:t,isLoading:n}=e(pt);return{filters:t(),isLoading:n()}})),(0,v.withDispatch)((e=>{const{saveFilter:t,deleteFilter:n,toggleFilter:a}=e(pt);return{saveFilter:t,deleteFilter:n,toggleFilter:a}})))((function(e){let{filters:t,deleteFilter:n,isLoading:a,saveFilter:r,toggleFilter:o}=e;const[i,l]=(0,h.useState)(!1);return(0,h.createElement)(h.Fragment,null,i&&(0,h.createElement)(y.Modal,{title:"New Filter",onRequestClose:()=>{l(!1)}},(0,h.createElement)("form",{className:"rest-api-filter-new-form",onSubmit:e=>{e.preventDefault(),r(e.target.endpoint.value,e.target.dotNotation.value,e.target.replacement.value),l(!1)}},(0,h.createElement)("div",{className:"grid"},(0,h.createElement)("label",{htmlFor:"endpoint"},"Endpoint"),(0,h.createElement)("input",{type:"text",name:"endpoint"}),(0,h.createElement)("label",{htmlFor:"jsonPath"},"Dot Notation"),(0,h.createElement)("input",{type:"text",name:"dotNotation"}),(0,h.createElement)("label",{htmlFor:"replacement"},"Replacement "),(0,h.createElement)("input",{type:"text",name:"replacement"})),(0,h.createElement)("input",{type:"submit",value:"Create New Filter",className:"button btn-new"}))),(0,h.createElement)("div",{id:"wc-admin-test-helper-rest-api-filters"},(0,h.createElement)("input",{type:"button",className:"button btn-primary btn-new",value:"New Filter",onClick:()=>l(!0)}),(0,h.createElement)("br",null),(0,h.createElement)("br",null),(0,h.createElement)("table",{className:"wp-list-table striped table-view-list widefat"},(0,h.createElement)("thead",null,(0,h.createElement)("tr",null,(0,h.createElement)("td",{className:"manage-column column-thumb"},"I.D"),(0,h.createElement)("td",{className:"manage-column column-thumb"},"Endpoint"),(0,h.createElement)("td",{className:"manage-column column-thumb"},"Dot Notation"),(0,h.createElement)("td",{className:"manage-column column-thumb align-center"},"Replacement"),(0,h.createElement)("td",{className:"manage-column column-thumb align-center"},"Enabled"),(0,h.createElement)("td",{className:"manage-column column-thumb align-center"},"Toggle"),(0,h.createElement)("td",{className:"manage-column column-thumb align-center"}))),(0,h.createElement)("tbody",null,a?(0,h.createElement)("tr",null,(0,h.createElement)("td",{colSpan:"6",align:"center"},"Loading...")):0===t.length?(0,h.createElement)("tr",null,(0,h.createElement)("td",{colSpan:"7",align:"center"},"No Filters Found")):t.map(((e,t)=>{const{endpoint:a,dot_notation:r,replacement:i,enabled:l}=e;return(0,h.createElement)("tr",{key:t},(0,h.createElement)("td",null,t+1),(0,h.createElement)("td",null,a),(0,h.createElement)("td",{key:"optionValue"},r),(0,h.createElement)("td",{className:"align-center"},i+""),(0,h.createElement)("td",{className:"align-center"},l+""),(0,h.createElement)("td",{className:"align-center"},(0,h.createElement)("button",{className:"button btn-primary",onClick:()=>o(t)},"Toggle")),(0,h.createElement)("td",{className:"align-center"},(0,h.createElement)("button",{className:"button btn-danger",onClick:()=>n(t)},"Delete")))}))))))})),Ct=(0,f.applyFilters)("woocommerce_admin_test_helper_tabs",[{name:"options",title:"Options",content:(0,h.createElement)(ke,null)},{name:"admin-notes",title:"Admin notes",content:(0,h.createElement)((()=>(0,h.createElement)(h.Fragment,null,(0,h.createElement)("h2",null,"Admin notes"),(0,h.createElement)("p",null,"This section contains tools for managing admin notes."),(0,h.createElement)(_,null),(0,h.createElement)(S,null))),null)},{name:"tools",title:"Tools",content:(0,h.createElement)(ce,null)},{name:"experiments",title:"Experiments",content:(0,h.createElement)(Ze,null)},{name:"features",title:"Features",content:(0,h.createElement)((function(){const{features:e={},modifiedFeatures:t=[]}=(0,v.useSelect)((e=>{const{getFeatures:t,getModifiedFeatures:n}=e(et);return{features:t(),modifiedFeatures:n()}})),{toggleFeature:n,resetModifiedFeatures:a}=(0,v.useDispatch)(et);return(0,h.createElement)("div",{id:"wc-admin-test-helper-features"},(0,h.createElement)("h2",null,"Features",(0,h.createElement)(y.Button,{disabled:0===t.length,onClick:()=>a(),isSecondary:!0,style:{marginLeft:"24px"}},"Reset to defaults")),(0,h.createElement)("table",{className:"features wp-list-table striped table-view-list widefat"},(0,h.createElement)("thead",null,(0,h.createElement)("tr",null,(0,h.createElement)("th",null,"Feature Name"),(0,h.createElement)("th",null,"Enabled?"),(0,h.createElement)("th",null,"Toggle"))),(0,h.createElement)("tbody",null,Object.keys(e).map((t=>(0,h.createElement)("tr",{key:t},(0,h.createElement)("td",{className:"feature-name"},t),(0,h.createElement)("td",null,e[t].toString()),(0,h.createElement)("td",null,(0,h.createElement)(y.Button,{onClick:()=>{n(t)},isPrimary:!0},"Toggle"))))))))}),null)},{name:"rest-api-filters",title:"REST API FIlters",content:(0,h.createElement)(Rt,null)}]),At=document.getElementById("woocommerce-admin-test-helper-app-root");At&&(0,h.render)((0,h.createElement)((function(){return(0,h.createElement)("div",{className:"wrap"},(0,h.createElement)("h1",null,"WooCommerce Admin Test Helper"),(0,h.createElement)(y.TabPanel,{className:"woocommerce-admin-test-helper__main-tab-panel",activeClass:"active-tab",tabs:Ct,initialTabName:Ct[0].name},(e=>(0,h.createElement)(h.Fragment,null,e.content,(0,f.applyFilters)(`woocommerce_admin_test_helper_tab_${e.name}`,[])))))}),null),At)})()})();